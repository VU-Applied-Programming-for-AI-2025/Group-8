{% extends "base.html" %}

{% block title %}Your Analysis History{% endblock %}

{% block content %}

<div class="history-container">
    <h2>Your Analysis History</h2>

    {% if results %}
    <ul style="list-style-type: none; padding: 0;">
        {% for entry in results | reverse %}
        <li class="entry">
            <p><strong>Symptoms:</strong> {{ entry.symptoms }}</p>

            <p><strong>Deficiency Analysis:</strong></p>
            <ul>
                {% for nutrient, details in entry.analyse.items() %}
                <li>
                    <h4>{{ nutrient }}</h4>
                    <p><strong>Why:</strong> {{ details.why }}</p>
                    <p><strong>Foods:</strong> {{ details.foods | join(', ') }}</p>
                    <p><strong>Tip:</strong> {{ details.tip }}</p>
                </li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p style="text-align: center; color: #777;">No analysis results saved yet.</p>
    {% endif %}

    <a class="back-link" href="{{ url_for('home') }}">‚Üê Back to Home</a>
</div>
{% endblock %}
