{% extends "base.html" %}

{% block title %}Your Profile{% endblock %}

{% block content %}

<div class="profile-container">
    <h2>Profile for {{ user.name }}</h2>

    {% if message %}
        <p class="success-message">{{ message }}</p>
    {% endif %}

    <form method="POST">
        <label>Full Name:</label>
        <input type="text" name="name" value="{{ user.name }}">

        <label>Age:</label>
        <input type="number" name="age" value="{{ user.age }}">

        <label>Sex:</label>
        <input type="text" name="sex" value="{{ user.sex }}">

        <label>Height (cm):</label>
        <input type="number" name="height" value="{{ user.height }}">

        <label>Weight (kg):</label>
        <input type="number" name="weight" value="{{ user.weight }}">

        <label>Skin Color:</label>
        <select name="skin_color" required>
            <option value="light" {% if user.skin_color == "light" %}selected{% endif %}>Light</option>
            <option value="medium" {% if user.skin_color == "medium" %}selected{% endif %}>Medium</option>
            <option value="dark" {% if user.skin_color == "dark" %}selected{% endif %}>Dark</option>
        </select>

        <label>Country:</label>
        <input type="text" name="country" value="{{ user.country }}">

        <label>Diet:</label>
        <select name="diet" required>
            {% for option in [
                "none", "glutenfree", "ketogenic", "vegetarian", "lacto-vegetarian",
                "ovo-vegetarian", "vegan", "pescetarian", "paleo", "primal",
                "lowfodmap", "whole30"
            ] %}
            <option value="{{ option }}" {% if option in user.diet %}selected{% endif %}>{{ option.replace('-', ' ').capitalize() }}</option>
            {% endfor %}
        </select>

        <label>Medications (comma separated):</label>
        <input type="text" name="medication" value="{{ ', '.join(user.medication) }}">

        <label>Existing Conditions (comma separated):</label>
        <input type="text" name="existing_conditions" value="{{ ', '.join(user.existing_conditions) }}">

        <label>Allergies (comma separated):</label>
        <input type="text" name="allergies" value="{{ ', '.join(user.allergies) }}">

        <label>Password:</label>
        <input type="password" name="password" value="{{ user.password }}">

        <div class="profile-actions">
            <button type="submit" class="update-profile-btn">Update Profile</button>
            <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
        </div>
    </form>

    <a class="back-link" href="{{ url_for('home') }}">‚Üê Back to Home</a>
</div>
{% endblock %}
