{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>Personalized Recommendations</h2>
    <p>Based on your profile and needs, here are some recipe suggestions:</p>
</div>

{% for meal_type, recipes in recipes_by_meal.items() %}
<div class="card">
    <h3>{{ meal_type|capitalize }}</h3>
    
    <div class="recipe-grid">
        {% for recipe in recipes %}
        <div class="recipe-card">
            {% if recipe.image %}
            <img src="{{ recipe.image }}" alt="{{ recipe.title }}">
            {% else %}
            <div class="recipe-image-placeholder"></div>
            {% endif %}
            <div class="recipe-card-content">
                <h4>{{ recipe.title }}</h4>
                <p>Ready in {{ recipe.readyInMinutes }} minutes</p>
                <div class="recipe-actions">
                    <a href="{{ url_for('recipe_details', recipe_id=recipe.id) }}" class="btn">View Recipe</a>
                    <button class="favorite-btn {% if recipe.id in user.saved_recipes %}active{% endif %}" data-recipe-id="{{ recipe.id }}">
                        <i class="{% if recipe.id in user.saved_recipes %}fas{% else %}far{% endif %} fa-heart"></i>
                        {% if recipe.id in user.saved_recipes %}Saved{% else %}Save{% endif %}
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}
{% endblock %}