{% extends "base.html" %}

{% block title %}{{ recipe.title }} - NutriSpoon{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/recipe_details.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <header class="recipe-header">
            <h1 class="recipe-title">{{ recipe.title }}</h1>
        </header>

        <main class="recipe-content">
            <div class="recipe-hero">
                <div class="recipe-image-container">
                    <img src="{{ recipe.image }}" alt="{{ recipe.title }}" class="recipe-image">
                </div>
            </div>

            <div class="recipe-sections">
                <section class="recipe-section">
                    <h2 class="section-title">
                        <span class="icon">ü•ò</span>
                        Ingredients
                    </h2>
                    <div class="section-content">
                        <ul class="ingredients-list">
                            {% for ingredient in recipe['extendedIngredients'] %}
                            <li class="ingredient-item">
                                <span class="ingredient-text">{{ ingredient.original }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </section>

                <section class="recipe-section">
                    <h2 class="section-title">
                        <span class="icon">üìä</span>
                        Nutrition
                    </h2>
                    <div class="section-content">
                        <div class="nutrition-grid">
                            {% for nutrient in recipe['nutrition']['nutrients'] %}
                            <div class="nutrition-item">
                                <span class="nutrient-name">{{ nutrient.name }}</span>
                                <span class="nutrient-value">{{ nutrient.amount }}{{ nutrient.unit }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <section class="recipe-section">
                    <h2 class="section-title">
                        <span class="icon">üìù</span>
                        Instructions
                    </h2>
                    <div class="section-content">
                        {% if recipe["Instructions"] %}
                        <div class="instructions-content">
                            {{ recipe["Instructions"] | safe }}
                        </div>
                        {% elif recipe.analyzedInstructions and recipe.analyzedInstructions[0].steps %}
                        <ol class="instructions-list">
                            {% for step in recipe.analyzedInstructions[0].steps %}
                            <li class="instruction-step">
                                <span class="step-number">{{ loop.index }}</span>
                                <span class="step-text">{{ step.step }}</span>
                            </li>
                            {% endfor %}
                        </ol>
                        {% else %}
                        <div class="no-instructions">
                            <p>No instructions available for this recipe.</p>
                        </div>
                        {% endif %}
                    </div>
                </section>
            </div>

            <div class="recipe-actions">
                <a href="javascript:history.back()" class="btn btn-secondary">
                    <span>‚Üê</span> Back to Recipes
                </a>
            </div>
        </main>
    </div>
{% endblock %}